<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
    function searchCep () {
        // Inicia o preloader
        startPreloader ()
 
        // Recupera o value do input cep
        let cep = document.getElementById('cep').value
 
        // Inicia requisição AJAX com o axios
        axios.get(`http://api.postmon.com.br/v1/cep/${cep}`)
                .then(response => {
                    showResults (response.data)
                })
                .catch(error => {
                    // console.log(error)
 
                    // Mostra a div com o erro
                    document.getElementById('error').style.display = 'block'
 
                    // Mostra a mensagem
                    document.getElementById('error').innerHTML = 'Erro inesperado'
                })
                .finally(() => endPreloader ())
 
        event.preventDefault()
    }
 
    function showResults (address) {
        // Mostra a div com o resultado
        document.getElementById('results').style.display = 'block'
 
        // Mostra os resultados:
        document.getElementById('results').innerHTML = `
            <p><b>Bairro: </b> ${address.bairro} </p>
            <p><b>Cidade: </b> ${address.cidade} </p>
            <p><b>Logradouro: </b> ${address.logradouro} </p>
            <p><b>Cep: </b> ${address.cep} </p>
        `
    }
 
    function startPreloader () {
        // Exibe a div de preloader
        document.getElementById('preloader').style.display = 'block'
 
        // Limpa os dados do resultado:
        document.getElementById('results').innerHTML = ''
 
        // Oculta a div com o resultado
        document.getElementById('results').style.display = 'none'
 
        // Oculta a div com o erro
        document.getElementById('error').style.display = 'none'
    }
 
    function endPreloader () {
        // Oculta a div de preloader
        document.getElementById('preloader').style.display = 'none'
    }
</script>
</head>
<body>
        <div class="container">
                <h1>Busca CEP com axios</h1>
             
                <form id="form-cep" action="#" onsubmit="searchCep()" class="form form-inline">
                    <input type="text" name="cep" id="cep" placeholder="Informe o cep" class="form-control">
                    <button type="submit" class="btn btn-info">Buscar</button>
                </form>
             
                <div id="error" style="display: none;" class="alert alert-danger"></div>
             
                <div id="preloader" style="display: none;" class="alert alert-info">
                    Carregando...
                </div>
             
                <div id="results" style="display: none;"></div>
            </div><!--Container-->
</body>
</html>